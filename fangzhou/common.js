/**
 * static.cms - v1.0.0  License By 
 * WEB小组  
 */
var MtaH5={clickStat:function(){},pgv:function(){}};!function($wui){$wui.cache.version=$('meta[name="version"]').attr("version")||"1.1.0",jQuery.fn.isChildAndSelfOf=function(e){return this.closest(e).length>0};var $cmsApi={setMtaCookie:function(e,t){if(e=e||"MTA-USER-ID",t=t||365,this.getMtaCookie())return this.getMtaCookie();var i=t,o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),document.cookie=e+"="+escape(function(){for(var e="",t=0;t<4;t++)e+=parseInt(1e8*Math.random());return hex_md5(e)}())+";expires="+o.toGMTString()},getMtaCookie:function(e){if(this.getCookie("trace_id"))return this.getCookie("trace_id");e=e||"MTA-USER-ID";var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return!!(t=document.cookie.match(i))&&unescape(t[2])},setCookie:function(e,t,i){var o=i,a=new Date;console.log(a.getTime()+24*o*60*60*1e3),a.setTime(a.getTime()+24*o*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()},getCookie:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return!!(t=document.cookie.match(i))&&unescape(t[2])},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var i=this.getCookie(e);null!=i&&(document.cookie=e+"="+i+";expires="+t.toGMTString())},copy:function(e,t){var i=function(){function e(e,i){return t(e)===i}function t(e){return i[Object.prototype.toString.call(e)]||"object"}var i={};return["Null","Undefined","Number","Boolean","String","Object","Function","Array","RegExp","Date"].forEach(function(e){i["[object "+e+"]"]=e.toLowerCase()}),{isType:e,getType:t}}();if(null===e||"object"!=typeof e)return e;var o,a,n,r=i.isType(e,"array")?[]:{};for(o in e)a=e[o],n=i.getType(a),!t||"array"!==n&&"object"!==n?r[o]=a:r[o]=this.copy(a);return r},getParam:function(e){if(paramValue="",isFound=!1,0==window.location.search.indexOf("?")&&window.location.search.indexOf("=")>1)for(arrSource=unescape(window.location.search).substring(1,window.location.search.length).split("&"),i=0;i<arrSource.length&&!isFound;)arrSource[i].indexOf("=")>0&&arrSource[i].split("=")[0].toLowerCase()==e.toLowerCase()&&(paramValue=arrSource[i].split("=")[1],isFound=!0),i++;return""==paramValue&&(paramValue=null),paramValue},localStorage:function(time){var Days=time||.5,exp=new Date;if(exp.setTime(exp.getTime()+24*Days*60*60*1e3),exp=exp.getTime(),window.localStorage)try{}catch(e){return layer.msg("亲，无痕模式无法使用此功能！"),!1}var ret={setLocalStorage:function(e,t){return window.localStorage.setItem("LOCAL_"+e,JSON.stringify({time:exp,data:t}))},getLocalStorage:function(key){return eval("("+window.localStorage.getItem("LOCAL_"+key)+")")},removeLocalStorage:function(e){return window.localStorage.removeItem("LOCAL_"+e)},removeLocalStorageAll:function(){for(var e in window.localStorage)"LOCAL"==e.split("_")[0]&&this.removeLocalStorage(e)}};for(var i in window.localStorage)if("LOCAL"==i.split("_")[0]){var item=eval("("+window.localStorage[i]+")");item.time-(new Date).getTime()<=0&&ret.removeLocalStorage(i)}return ret},loaditem:[],digitalAbbNumber:function(e){if((e+"").indexOf("万")>=0)return e;if(e<1e4)return e;var t=[],i=0;e=(e||0).toString().split("");for(var o=!1,a=e.length-1;a>=0;a--)i++,o&&t.unshift(e[a]),i%4||0==a||o||(t.unshift(e[a]),t.unshift("."),o=!0);return("0"!=t[2]?t.join(""):function(){var e="",i=!0;return $.each(t,function(t,o){"."!=o&&i&&(e+=o,i=!1)}),e}())+"万"},loadProgress:100,loadAnimation:function(e){var t=$('<div class="ui_load"><p></p></div><div class="ui_load_bg"></div>');0==$(".ui_load").length&&$("body").append(t);var i=e<50?3e3:e<80?800:200;return $(".ui_load").find("p").animate({width:e+"%"},i),e==this.loadProgress&&setTimeout(function(){$(".ui_load,.ui_load_bg").fadeOut("400",function(){$(this).remove()})},800),t},getTime:function(e){return this.ajax({url:"http://cmsstatic.dataoke.com/now"}).done(function(t){e(t.data.time)})},ajax:function(e,t){return e=$.extend(!0,{type:"GET",dataType:"JSON"},e),$.ajax(e).done(function(e){t?t(e):"undefined"!=typeof e.status&&e.msg&&1!=e.status&&"ok"!=e.msg&&""!=e.msg&&(40003==e.code?(layer.msg(e.msg),$cmsApi.delCookie("TOKEN"),window.location.href="?r=login/login&returnUrl="+encodeURIComponent(window.location.href)):40007==e.code?$cmsApi.delCookie("TOKEN"):layer.msg(e.msg))}).error(function(){$cmsApi.loadAnimation(100),console.log("请求失败地址："+e.url),layer.msg&&layer.msg("服务器繁忙请稍后再试！")})},setLoadItem:function(e,t){var i=0;for(var o in this.loaditem)i>15&&this.loaditem.splice(0,1),i++;this.loaditem.push({key:e,item:t});var a=new Date;if(localStorage)try{localStorage.setItem("LOCAL-STORAGE-ITEM",JSON.stringify({time:a.getTime(),data:this.loaditem}))}catch(n){}return this.loaditem[e]},getLoadItem:function(id){var ret,loaditem=this.loaditem;if(localStorage)try{var item=eval("("+localStorage.getItem("LOCAL-STORAGE-ITEM")+")"),time=new Date;loaditem=item?time.getTime()-item.time>1e5?this.loaditem:item.data:this.loaditem,this.loaditem=loaditem}catch(e){}for(var key in loaditem)loaditem[key].key==id&&(ret=loaditem[key].item);return ret},goodsListTpl:function(e,t,i,o){t=t||window.location.pathname+"?r=p/d";for(var a="",n=0;n<=e.length-1;n++)a=a+'<li class="col-12-6" id="cms-goods-items_'+e[n].id+'" >    <div class="cent">        <a ui-jsbridge data-params="{ jump_type: 1,jump_value:'+e[n].id+'}" '+function(){var t="";if(!e[n].tongji)return t;for(var i in e[n].tongji)t=t+"data-"+i+"='"+e[n].tongji[i]+"' ";return t+"ui-utm"}()+' style="height:'+$(window).width()/2+'px;" href="'+(e[n].jump_url?e[n].jump_url:t+"&id="+e[n].id+(o?"&source="+o:""))+'" class="img"><img class="lazy" ui-lazyload src="'+(i||$wui.cache.host)+'/web/images/rolling.gif" data-original="'+e[n].pic+'_310x310.jpg" alt=""></a>        <div class="mar">            <a ui-jsbridge data-params="{ jump_type: 1,jump_value:'+e[n].id+'}"  href="'+(e[n].jump_url?e[n].jump_url:t+"&id="+e[n].id+(o?"&source="+o:""))+'" ><h3 class="bt">'+e[n].d_title+'</h3></a>            <div class="row-s num">                <div class="col-12-6">'+(1==e[n].istmall?" 天猫价 ¥"+e[n].yuanjia:"淘宝价 ¥"+e[n].yuanjia)+'</div>                <div class="col-12-6 text-right">已售'+this.digitalAbbNumber(e[n].xiaoliang)+'</div>            </div>            <div class="row-s">                <div class="col-12-6 money">                    <span>券后价&nbsp;¥</span>'+this.accSub(e[n].yuanjia,e[n].quan_jine)+'                </div>                <div class="col-12-6">                    <span class="quan"><i>'+parseFloat(e[n].quan_jine)+"元券</i></span>                </div>            </div>        </div>    </div></li>";return a},goodsListTplTwo:function(e,t,i,o){t=t||window.location.pathname+"?r=p/d";for(var a="",n=0;n<=e.length-1;n++)a=a+'<li id="cms-goods-items_'+e[n].id+'"  class="row-s"><a ui-jsbridge data-params="{ jump_type: 1,jump_value:'+e[n].id+'}"  href="'+(e[n].jump_url?e[n].jump_url:t+"&id="+e[n].id+(o?"&source="+o:""))+'" >    <p  class="img"><img ui-lazyload src="'+(i||$wui.cache.host)+'/web/images/rolling.gif" data-original="'+e[n].pic+'_310x310.jpg" alt="">'+(e[n].goods_tag&&""!=e[n].goods_tag?'<span class="goods_tag">'+e[n].goods_tag+"</span>":"")+'</p>    <div class="cent">        <h3>'+e[n].d_title+'</h3>        <div class="num col-aaa ">            <span>'+(1==e[n].istmall?" 天猫价 ¥"+e[n].yuanjia:"淘宝价 ¥"+e[n].yuanjia)+'</span><span class="fr">已售'+this.digitalAbbNumber(e[n].xiaoliang)+'件</span>        </div>        <div class=" money col-money">        <p class="quan fr"><i>'+parseFloat(e[n].quan_jine)+'元券</i></p>券后价 <span class=""><i>¥</i>'+this.accSub(e[n].yuanjia,e[n].quan_jine)+"</span>        </div>    </div></a></li>";return a},accSub:function(e,t){var i,o,a,n;try{i=e.toString().split(".")[1].length}catch(r){i=0}try{o=t.toString().split(".")[1].length}catch(r){o=0}return a=Math.pow(10,Math.max(i,o)),n=i>=o?i:o,((e*a-t*a)/a).toFixed(n)},accAdd:function(e,t){var i,o,a,n;try{i=e.toString().split(".")[1].length}catch(r){i=0}try{o=t.toString().split(".")[1].length}catch(r){o=0}if(n=Math.abs(i-o),a=Math.pow(10,Math.max(i,o)),n>0){var s=Math.pow(10,n);i>o?(e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""))*s):(e=Number(e.toString().replace(".",""))*s,t=Number(t.toString().replace(".","")))}else e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""));return(e+t)/a},accMul:function(e,t){var i=0,o=e.toString(),a=t.toString();try{i+=o.split(".")[1].length}catch(n){}try{i+=a.split(".")[1].length}catch(n){}return Number(o.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,i)},accDiv:function(arg1,arg2){var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length}catch(e){}try{t2=arg2.toString().split(".")[1].length}catch(e){}with(window.Math)return r1=Number(arg1.toString().replace(".","")),r2=Number(arg2.toString().replace(".","")),r1/r2*pow(10,t2-t1)},scrolltop:function(){$("body").append('<a class="iconfont icon-shang scroll_top"></a>');var e=$(window).height(),t=$(".layout").css("paddingBottom");$(".scroll_top").css({bottom:t}),$(document).scroll(function(t){$(document).scrollTop()>e+e/2?($(".scroll_top").addClass("active"),$(".tmall_home_tab").css({"-webkit-transform":" translateY(-50px) translateX(0)",transform:"translateY(-50px) translateX(0)",transition:"all .4s ease 0s","-webkit-transition":"all .4s ease 0s"})):($(".scroll_top").removeClass("active"),$(".tmall_home_tab").css({"-webkit-transform":" translateY(0px) translateX(0)",transform:"translateY(0px) translateX(0)",transition:"all .4s ease 0s","-webkit-transition":"all .4s ease 0s"}))}),$(".scroll_top").click(function(e){$("body,html").animate({scrollTop:0},400)})}};$wui.uses(["layer","swiper"]).directive("ui-up-app",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/models-up-app.js"],scope:{location:"location"},link:function(e){var t=e.scope,i=e.element;$wui.modelsUpApp.init(t,i)}}}).directive("ui-search",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/models-search.js"],scope:{kw:"kw",callback:"~callback"},link:function(e){if($(e.element).attr("isLoad"))return!1;$(e.element).attr("isLoad",!0);var t=e.scope,i=e.element;$wui.modelsUiSearch.init(t,i)}}}).directive("ui-hover",function(){return{scope:{list:"list"},link:function(e){var t=e.scope,i=e.element;$(i).find(t.list).hover(function(){$(i).find(t.list).removeClass("cur"),$(this).addClass("cur"),$(this).addClass("active")},function(){$(this).removeClass("active")})}}}).directive("ui-show",function(){return{scope:{parents:"parents","class":"css",active:"active"},link:function(e){var t=e.scope,i=e.element,o=function(e){return t["class"]?$(t["class"]):$(e).parents(t.parents||"div")};$(i).unbind("click").on("click",function(){var e=this;0!=t.active?$(this).toggleClass("active"):$(this).removeClass("active"),$(document).unbind("click").on("click",function(){$(event.target).isChildAndSelfOf(e,o(e))||($(e).removeClass("active"),o(e).removeClass("active"))}),o(this).toggleClass("active")})}}}).directive("ui-share-code",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/goods-share-copy.js","../clipboard.min.js"],scope:{item:"=item"},link:function(e){var t=e.scope,i=e.element;$(i).unbind("click").on("click",function(){$wui.goodsShareCode.setTmallGoodsCode(t.item,function(e){$wui.goodsShareCode.getCodeShow(t.item,e.code)},function(){layer.msg("服务器繁忙请稍后再试...")})})}}}).directive("ui-share-img",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/goods-share-copy.js","../clipboard.min.js"],scope:{img:"img"},link:function(e){var t=e.scope,i=e.element;$(i).unbind("click").on("click",function(){$wui.goodsShareCode.getCanvasImage(t.img)})}}}).directive("ui-code-shop",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/goods-share-copy.js","../clipboard.min.js"],scope:{item:"=item",codeUrl:"code-url"},link:function(e){var t=e.scope,i=e.element;if($(i).attr("isCodeShop"))return!1;$(i).attr("isCodeShop",!0);var o=function(){$.ajax({url:"?r=p/savemoney",type:"post",data:{token:$cmsApi.getCookie("TOKEN"),money:$(i).data("money")||$(".getGoodsLink").data("money"),id:$(i).data("id")||$(".getGoodsLink").data("id")}}),t.codeUrl?$cmsApi.ajax({url:t.codeUrl,type:"GET",dataType:"JSON"}).done(function(e){$wui.goodsShareCode.getCodeShopping(t.item)}):$wui.goodsShareCode.setTmallGoodsCode(t.item,function(e){t.item.code=e.code,$wui.goodsShareCode.getCodeShopping(t.item)},function(){layer.msg("服务器繁忙请稍后再试...")})};$(i).find("a").click(function(e){return o(),!1}),$(i).unbind("click").on("click",o.bind(this))}}}).directive("ui-weixin-open",function(){return{template:"<div class='weixin-msg'></div>",scope:{},link:function(e){var t=(e.scope,e.element),i=$(e.template);$(t).unbind("click").on("click",function(){$("body").append(i),i.unbind("click").on("click",function(){$(this).remove()})})}}}).directive("ui-lazyload",function(){return{uses:["../lazyload.js"],scope:{},link:function(e){var t=(e.scope,e.element);return!$(t).attr("isLoad")&&($(t).attr("isLoad",!0),void $(t).lazyload({effect:"fadeIn"}))}}}).directive("ui-classify",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/models-goods-classify.js","plugin/swiper/js/swiper.js"],addcss:["plugin/swiper/swiper.css"],scope:{url:"url",fixed:"=fixed",item:"=item",callback:"=callback",ready:"=ready",active:"active"},link:function(e){var t=e.scope,i=e.element,o=setInterval(function(){$wui.modelsGoodsClassify&&($wui.modelsGoodsClassify.init(t,i),clearInterval(o))},300)}}}).directive("ui-open-taobao",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/goods-share-copy.js"],scope:{},link:function(e){var t=(e.scope,e.element),i=function(e){var t=e.replace("http://","").replace("https://",""),i=document.createElement("iframe");i.src="taobao://"+t,i.style.display="none",document.body.appendChild(i),window.location=e},o=function(e){var t=e.replace("http://","").replace("https://",""),i="taobao://"+t;window.location=i,window.setTimeout(function(){window.location=e},3e3)},a=function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},n=function(e,t){var e=e;if($.ajax({url:"?r=p/savemoney",type:"post",data:{token:$cmsApi.getCookie("TOKEN"),money:$(t).data("money"),id:$(t).data("id")}}),!a()){$("body").append("<center style='position: fixed; width:100%; height:100%; left:0;top:0; z-index:99999;background:#fff;'><br/>唤醒手机淘宝中...</center>");var n=navigator.userAgent.toLowerCase();"iphone os 9"==n.match(/iphone os 9/i)?o(e):i(e)}};$(t).unbind("click").on("click",function(e){e.preventDefault();var t=this;MtaH5.clickStat("dovoucher",{vamount:$(".goods_quan .row .money p span").html(),uid:$cmsApi.getMtaCookie(),gid:$cmsApi.getParam("id"),domainid:window.location.hostname.replace("www.","")}),$wui.goodsShareCode.setTmallGoodsCode(!1,function(e){n(e.link,t)},function(e){n(e,t)})})}}}).directive("ui-home-content",function(){return{uses:["http://"+$wui.cache.host+"wap_new/home/js/models-home.js"],scope:{item:"=item"},link:function(e){var t=e.scope,i=e.element;return!$(i).attr("isLoad")&&($(i).attr("isLoad",!0),MtaH5.clickStat("showPage",{uid:$cmsApi.getMtaCookie(),name:"首页",siteid:standId,domainid:window.location.hostname.replace("www.",""),time:((new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours())+":"+((new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes())}),void $wui.homeModels.init(t,i))}}}).directive("ui-goods-list-tow",function(){return{uses:["http://"+$wui.cache.host+"wap_new/common/models/models-goods-list-tow.js"],scope:{page:"=page",url:"url"},link:function(e){var t=e.scope,i=e.element;$wui.modelsGoodsListTow.init(t,i)}}}).directive("ui-login",function(){return{uses:["http://"+$wui.cache.host+"wap_new/login/js/login.js"],scope:{page:"type",url:"url",returnUrl:"return-url","switch":"switch",mtaCase:"mta-case"},link:function(e){var t=e.scope,i=e.element;$wui.modelsLogin.init(t,i)}}}).directive("ui-exit-login",function(){return{scope:{},link:function(e){var t=(e.scope,e.element),i=$cmsApi.getCookie("TOKEN"),o=layer.load();i||(window.location.href="?r=login/login&returnUrl="+window.location.href),layer.close(o),$(t).unbind("click").on("click",function(e){e.preventDefault(),wui.layer.confirm("是否需要退出？",{icon:3,title:"提示",btn:["是","否"]},function(e){wui.layer.load(),$cmsApi.ajax({url:"?r=login/destroy",data:{token:i}}).done(function(){wui.layer.closeAll(),$cmsApi.delCookie("TOKEN"),window.location.replace("?r=login/login")}),layer.close(e)})})}}}).directive("ui-footprint",function(){return{uses:["../lazyload.js","http://"+$wui.cache.host+"wap_new/user/js/footprint.js"],scope:{item:"=item",type:"type",openUrl:"open-url"},link:function(e){var t=e.scope,i=e.element;$wui.modelsFootprint.init(t,i)}}}).directive("ui-collection",function(){return{uses:["../lazyload.js","http://"+$wui.cache.host+"wap_new/user/js/collection.js"],scope:{item:"=item",type:"type",openUrl:"open-url"},link:function(e){var t=e.scope,i=e.element;$wui.modelsCollection.init(t,i)}}}).directive("ui-add-collection",function(){return{scope:{id:"id"},link:function(e){var t=e.scope,i=e.element,o=$cmsApi.getCookie("TOKEN");$cmsApi.ajax({url:"?r=user/addcheck",type:"POST",data:{id:t.id,token:o}}).done(function(e){e.status?($(i).addClass("active"),a()):($(i).removeClass("active"),n())});var a=function(){var e=!1;$(i).unbind("click").on("click",function(a){if(a.preventDefault(),e)return!1;e=!0;var r=layer.load();$cmsApi.ajax({url:"?r=user/del",type:"POST",data:{list:[t.id],token:o}}).done(function(t){layer.close(r),e=!1,1==t.status&&($(i).removeClass("active"),n())}).error(function(){e=!1})})},n=function(){var e=!1;$(i).unbind("click").on("click",function(n){if(n.preventDefault(),e)return!1;e=!0;var r=layer.load();$cmsApi.ajax({url:"?r=user/add",type:"POST",data:{id:t.id,token:o}}).done(function(t){layer.close(r),e=!1,1==t.status&&($(i).addClass("active"),wui.layer.msg("添加收藏成功！"),a())}).error(function(){e=!1})})}}}}).directive("ui-mta-modular",function(){return{scope:{type:"type",mtaName:"mta_name"},link:function(e){var t=e.scope,i=e.element;return!$(i).attr("isLoad")&&($(i).attr("isLoad",!0),MtaH5.clickStat("showModule",{uid:$cmsApi.getMtaCookie(),name:t.mtaName}),void $(i).find("*[data-mold]").unbind("click").on("click",function(e){MtaH5.clickStat("clickModule",{uid:$cmsApi.getMtaCookie(),name:t.mtaName,area:$(this).data("el"),mold:$(this).data("mold"),addr:$(this).data("addr")})}))}}}).directive("ui-dragload",function(){return{uses:["../lazyload.js"],scope:{callback:"~callback",complete:"~complete"},link:function(e){function t(e){$(window).scroll(function(){var t=$(e).offset().top+.8*$(e).height();return!a&&void($(window).scrollTop()+$(window).height()>=t&&(a=!a,o.callback(e,i)))})}function i(){a=!1}if($(e.element).attr("isLoad"))return!1;$(e.element).attr("isLoad",!0);var o=e.scope;t($(e.element));var a=!1}}}).directive("ui-jsbridge",function(){return{uses:["../JSBridge.js"],scope:{on:"on",params:"=params"},link:function(e){var t=e.scope,i=e.element,o=window.location.href.indexOf("cmsnative:jump");return!($(i).attr("isLoad")||o<0)&&($(i).attr("isLoad",!0),t.params.title=t.params.title||"",t.params.jump_value=t.params.jump_value||"",void $(i).unbind("click").on(t.on||"click",function(e){if(t.params.jump_app_url){var i=layer.load();$cmsApi.ajax({url:t.params.jump_app_url,type:"get",dataType:"json"}).done(function(e){layer.close(i),t.params.jump_value=e.data.jump_app_url,JSBridge.call("bridge","intentCommon",t.params,function(e){return!1})})}else JSBridge.call("bridge","intentCommon",t.params,function(e){return!1});return!1}))}}}).directive("ui-back",function(){return{scope:{},link:function(e){var t=(e.scope,e.element);$(t).on("click",function(){if(!$(this).attr("href")){if(window.history.length>1)return window.history.back(-1),!1;window.location.href=window.location.origin+window.location.pathname+"?r=index/wap"}})}}}),$(window).load(function(){$cmsApi.setMtaCookie()});var setLayer=setInterval(function(){wui.layer&&(wui.layer.msg=function(e){$(".icon_msg").remove();var t=$('<div class="icon_msg"><span>'+e+"</span></div>");$("body").append(t),t.addClass("active"),setTimeout(function(){t.addClass("up").removeClass("active"),setTimeout(function(){t.remove()},400)},2e3)},clearInterval(setLayer))},300);$cmsApi.scrolltop(),window.$cmsApi=$cmsApi}(wui);